# Python Bindings for Modern C++ Features Demo Project

[![Build & Test](https://github.com/hakula139/cpp-demo-project/actions/workflows/build-and-test.yml/badge.svg)](https://github.com/hakula139/cpp-demo-project/actions/workflows/build-and-test.yml)
[![Python](https://img.shields.io/badge/python-3.12+-blue.svg)](https://python.org)
[![Poetry](https://img.shields.io/badge/poetry-latest-blue.svg)](https://python-poetry.org)
[![pybind11](https://img.shields.io/badge/pybind11-latest-green.svg)](https://pybind11.readthedocs.io)
[![Coverage](https://img.shields.io/badge/coverage-100%25-green.svg)](https://pytest.org)
[![Type Hints](https://img.shields.io/badge/typing-typed-green.svg)](https://docs.python.org/3/library/typing.html)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](../LICENSE)

Python bindings for the Modern C++23 Features Demo Project, providing Pythonic access to advanced C++ features
through `pybind11`. This package demonstrates best practices for creating high-performance Python libraries backed by
modern C++ code, with comprehensive type hints, testing, and development tools.

## ğŸš€ Features

### Core Features

- **Selected C++23 Features**: Python API for key C++ components with practical Python applications
- **pybind11 Integration**: Seamless C++ / Python interoperability with automatic conversions
- **Modern Python 3.12**: Leverages latest Python features and performance improvements
- **Pythonic Design**: Intuitive Python APIs that follow PEP conventions
- **Type Safety**: Comprehensive type hints and runtime type checking
- **Iterator Support**: Python-native iteration over C++ containers and ranges
- **Context Managers**: RAII patterns exposed as Python context managers
- **Error Handling**: Proper Python exception mapping from C++ exceptions

### Code Quality & Development

- **Automatic Formatting**: Pre-commit hooks with `ruff format`
- **Linting**: Pre-commit hooks with `ruff check` and `bandit` for code style and security checks
- **Type Checking**: Full `mypy` support with strict type checking
- **Poetry**: Modern dependency management and packaging
- **Test Coverage**: 100% test coverage with HTML and XML reports
- **Documentation**: Comprehensive numpy-style docstrings
- **CI/CD Automation**: Automatic build and test workflows

## ğŸ“‹ Table of Contents

- [ğŸš€ Features](#-features)
  - [Core Features](#core-features)
  - [Code Quality \& Development](#code-quality--development)
- [ğŸ“‹ Table of Contents](#-table-of-contents)
- [ğŸ› ï¸ Installation](#ï¸-installation)
  - [Prerequisites](#prerequisites)
  - [Quick Start](#quick-start)
    - [Build the C++ extensions](#build-the-c-extensions)
    - [Prepare the environment](#prepare-the-environment)
    - [Build and install the package](#build-and-install-the-package)
    - [Run examples](#run-examples)
    - [Run tests](#run-tests)
- [ğŸ¯ Usage](#-usage)
- [ğŸ“ Project Structure](#-project-structure)
- [ğŸ”§ Components Overview](#-components-overview)
- [ğŸ’» Development Notes](#-development-notes)
  - [Code Quality](#code-quality)

## ğŸ› ï¸ Installation

### Prerequisites

- **Python 3.12+**
- **[Poetry]** (for dependency management)

[Poetry]: https://python-poetry.org

### Quick Start

#### Build the C++ extensions

```bash
cd ..  # From root directory
cmake --preset release-python
cmake --build --preset release-python
```

#### Prepare the environment

```bash
cd python

# Install all dependencies
poetry install

# Activate the virtual environment
eval $(poetry env activate)
```

#### Build and install the package

```bash
# Build the package
python3 scripts/build.py

# Install the package
pip3 install dist/demo_python-1.1.0-py3-none-any.whl
```

#### Run examples

```bash
python3 examples/algorithms_example.py
python3 examples/containers_example.py
python3 examples/exceptions_example.py
python3 examples/random_example.py
python3 examples/shapes_example.py
python3 examples/timing_example.py
```

#### Run tests

```bash
poetry run pytest
```

## ğŸ¯ Usage

```python
from demo.algorithms import count_if, sort
from demo.containers import Container
from demo.shapes import Circle

# Exported C++ container
numbers = Container(int, [42, 17, 89, 3, 56])
print(f'Original: {numbers}')

# Sort the container in place
sort(numbers)
print(f'Sorted: {numbers}')

# Count elements matching a condition
even_count = count_if(numbers, lambda n: n % 2 == 0)
print(f'Even numbers: {even_count}')

# Exported C++ shape
circle = Circle(5.0)
area = circle.get_area()
perimeter = circle.get_perimeter()
print(f'Area: {area:.2f}, Perimeter: {perimeter:.2f}')
```

More examples can be found in the [`examples`](examples) directory.

## ğŸ“ Project Structure

```text
python/
â”œâ”€â”€ .venv/                            # Virtual environment (generated by Poetry)
â”œâ”€â”€ dist/                             # Build output (generated by scripts/build.py)
â”œâ”€â”€ src/
â”‚   â””â”€â”€ demo/                         # Main Python package
â”‚       â”œâ”€â”€ __init__.py               # Package initialization
â”‚       â”œâ”€â”€ algorithms.py             # Python wrapper for the algorithms module
â”‚       â”œâ”€â”€ containers.py             # Python wrapper for the containers module
â”‚       â”œâ”€â”€ exceptions.py             # Python wrapper for the exceptions module
â”‚       â”œâ”€â”€ random.py                 # Python wrapper for the random module
â”‚       â”œâ”€â”€ shapes.py                 # Python wrapper for the shapes module
â”‚       â””â”€â”€ timing.py                 # Python wrapper for the timing module
â”œâ”€â”€ examples/                         # Usage examples and demonstrations
â”‚   â””â”€â”€ [module]_example.py           # Usage examples for the module
â”œâ”€â”€ tests/                            # Test suite using pytest
â”‚   â””â”€â”€ test_[module].py              # Unit tests for the module
â”œâ”€â”€ scripts/                          # Development scripts
â”‚   â””â”€â”€ build.py                      # Package build automation
â”œâ”€â”€ pyproject.toml                    # Project configuration and dependencies
â”œâ”€â”€ poetry.lock                       # Locked dependency versions
â””â”€â”€ README.md                         # This file
```

## ğŸ”§ Components Overview

Each Python module provides a clean, Pythonic interface to the corresponding C++ component:

| Component      | Python Module     |
| -------------- | ----------------- |
| **Algorithms** | `demo.algorithms` |
| **Containers** | `demo.containers` |
| **Exceptions** | `demo.exceptions` |
| **Random**     | `demo.random`     |
| **Shapes**     | `demo.shapes`     |
| **Timing**     | `demo.timing`     |

## ğŸ’» Development Notes

### Code Quality

The project uses a comprehensive set of tools to maintain code quality:

```bash
# All-in-one command to run all quality checks
poetry run pre-commit run --all-files

# Lint with ruff
poetry run ruff check src

# Format with ruff
poetry run ruff format src

# Check types with mypy
poetry run mypy .

# Security analysis with bandit
poetry run bandit -r src
```
